#!/bin/bash

frame_chars=("═" "║" "╔" "╗" "╚" "╝")

ansi_nc="\e[0m"

ansi_fg_violet="\e[38:5:57m"
ansi_fg_yellow="\e[33m"
ansi_fg_beige="\e[38:5:224m"

ansi_bg_blue="\e[48:5:17m"
ansi_bg_blue2="\e[48:5:18m"

ansi_frame="${ansi_bg_blue}${ansi_fg_violet}"
ansi_mini_color="${ansi_bg_blue2}${ansi_fg_yellow}"
ansi_rt_color="${ansi_bg_blue2}${ansi_fg_beige}"

mini_frame_height=9
mini_frame_width=34

ascii_frames_mini=(
".   ....   .....    .....   .... .\e[B\e[34D\
.. .....   .....    .....   .... .\e[B\e[34D\
........   .....    ......  .... .\e[B\e[34D\
........   .....    ......  .... .\e[B\e[34D\
........   .....    ....... .... .\e[B\e[34D\
. . ....   .....    ............ .\e[B\e[34D\
.   ....   .....    ............ .\e[B\e[34D\
.   ....   .....    .....  ..... .\e[B\e[34D\
.   ....   .....    .....   .... ."
".   ....   .....    .....   .... @\e[B\e[34D\
.. .....   .....    .....   .... @\e[B\e[34D\
........   .....    ......  .... @\e[B\e[34D\
........   .....    ......  .... @\e[B\e[34D\
........   .....    ....... .... @\e[B\e[34D\
. . ....   .....    ............ @\e[B\e[34D\
.   ....   .....    ............ @\e[B\e[34D\
.   ....   .....    .....  ..... @\e[B\e[34D\
.   ....   .....    .....   .... @"
".   ....   .....    .....   ..@@ @\e[B\e[34D\
.. .....   .....    .....   ..@@ @\e[B\e[34D\
........   .....    ......  ..@@ @\e[B\e[34D\
........   .....    ......  ..@@ @\e[B\e[34D\
........   .....    ....... ..@@ @\e[B\e[34D\
. . ....   .....    ..........@@ @\e[B\e[34D\
.   ....   .....    ..........@@ @\e[B\e[34D\
.   ....   .....    .....  ...@@ @\e[B\e[34D\
.   ....   .....    .....   ...@ @"
".   ....   .....    .....   @@@@ @\e[B\e[34D\
.. .....   .....    .....   @@@@ @\e[B\e[34D\
........   .....    ......  @@@@ @\e[B\e[34D\
........   .....    ......  @@@@ @\e[B\e[34D\
........   .....    ....... @@@@ @\e[B\e[34D\
. . ....   .....    .......@@@@@ @\e[B\e[34D\
.   ....   .....    .......@@@@@ @\e[B\e[34D\
.   ....   .....    .....  @@@@@ @\e[B\e[34D\
.   ....   .....    .....   @@@@ @"
".   ....   .....    .....   @@@@ @\e[B\e[34D\
.. .....   .....    .....   @@@@ @\e[B\e[34D\
........   .....    .....@  @@@@ @\e[B\e[34D\
........   .....    .....@  @@@@ @\e[B\e[34D\
........   .....    .....@@ @@@@ @\e[B\e[34D\
. . ....   .....    .....@@@@@@@ @\e[B\e[34D\
.   ....   .....    .....@@@@@@@ @\e[B\e[34D\
.   ....   .....    .....  @@@@@ @\e[B\e[34D\
.   ....   .....    .....   @@@@ @"
".   ....   .....    @@@@@   @@.. .\e[B\e[34D\
.. .....   .....    @@@@@   @@.. .\e[B\e[34D\
........   .....    @@@@@@  @@.. .\e[B\e[34D\
........   .....    @@@@@@  @@.. .\e[B\e[34D\
........   .....    @@@@@@@ @@.. .\e[B\e[34D\
. . ....   .....    @@@@@@@@@@.. .\e[B\e[34D\
.   ....   .....    @@@@@@@@@@.. .\e[B\e[34D\
.   ....   .....    @@@@@  @@@.. .\e[B\e[34D\
.   ....   .....    @@@@@   @@.. ."
".   ....   @@@@@    @....   .... .\e[B\e[34D\
.. .....   @@@@@    @....   .... .\e[B\e[34D\
........   @@@@@    @.....  .... .\e[B\e[34D\
........   @@@@@    @.....  .... .\e[B\e[34D\
........   @@@@@    @...... .... .\e[B\e[34D\
. . ....   @@@@@    @........... .\e[B\e[34D\
.   ....   @@@@@    @........... .\e[B\e[34D\
.   ....   @@@@@    @....  ..... .\e[B\e[34D\
.   ....   @@@@@    @....   .... ."
".   @@@@   @@@..    .....   .... .\e[B\e[34D\
.. .@@@@   @@@..    .....   .... .\e[B\e[34D\
....@@@@   @@@..    ......  .... .\e[B\e[34D\
....@@@@   @@@..    ......  .... .\e[B\e[34D\
....@@@@   @@@..    ....... .... .\e[B\e[34D\
. . @@@@   @@@..    ............ .\e[B\e[34D\
.   @@@@   @@@..    ............ .\e[B\e[34D\
.   @@@@   @@@..    .....  ..... .\e[B\e[34D\
.   @@@@   @@@..    .....   .... ."
"@   @@@.   .....    .....   .... .\e[B\e[34D\
@@ @@@@.   .....    .....   .... .\e[B\e[34D\
@@@@@@@.   .....    ......  .... .\e[B\e[34D\
@@@@@@@.   .....    ......  .... .\e[B\e[34D\
@@@@@@@.   .....    ....... .... .\e[B\e[34D\
@ @ @@@.   .....    ............ .\e[B\e[34D\
@   @@@.   .....    ............ .\e[B\e[34D\
@   @@@.   .....    .....  ..... .\e[B\e[34D\
@   @@@.   .....    .....   .... ."
"@   ....   .....    .....   .... .\e[B\e[34D\
@@ @@...   .....    .....   .... .\e[B\e[34D\
@@@@@...   .....    ......  .... .\e[B\e[34D\
@@@@@...   .....    ......  .... .\e[B\e[34D\
@@@@@...   .....    ....... .... .\e[B\e[34D\
@ @ @...   .....    ............ .\e[B\e[34D\
@   @...   .....    ............ .\e[B\e[34D\
@   @...   .....    .....  ..... .\e[B\e[34D\
@   @...   .....    .....   .... ."
"@   ....   .....    .....   .... .\e[B\e[34D\
@@ .....   .....    .....   .... .\e[B\e[34D\
@@......   .....    ......  .... .\e[B\e[34D\
@@......   .....    ......  .... .\e[B\e[34D\
@@......   .....    ....... .... .\e[B\e[34D\
@ . ....   .....    ............ .\e[B\e[34D\
@   ....   .....    ............ .\e[B\e[34D\
@   ....   .....    .....  ..... .\e[B\e[34D\
@   ....   .....    .....   .... ."
".   ....   .....    .....   .... .\e[B\e[34D\
@. .....   .....    .....   .... .\e[B\e[34D\
@.......   .....    ......  .... .\e[B\e[34D\
@.......   .....    ......  .... .\e[B\e[34D\
@.......   .....    ....... .... .\e[B\e[34D\
@ . ....   .....    ............ .\e[B\e[34D\
@   ....   .....    ............ .\e[B\e[34D\
@   ....   .....    .....  ..... .\e[B\e[34D\
@   ....   .....    .....   .... .")

ascii_frames_mini2=(
".   ....   .....    .....   .... .\e[B\e[34D\
.. .....   .....    .....   .... .\e[B\e[34D\
........   .....    ......  .... .\e[B\e[34D\
........   .....    ......  .... .\e[B\e[34D\
........   .....    ....... .... .\e[B\e[34D\
. . ....   .....    ............ .\e[B\e[34D\
.   ....   .....    ............ .\e[B\e[34D\
.   ....   .....    .....  ..... .\e[B\e[34D\
.   ....   .....    .....   .... ."
".   ....   ....@    @....   .... .\e[B\e[34D\
.. .....   ....@    @....   .... .\e[B\e[34D\
........   ....@    @.....  .... .\e[B\e[34D\
........   ...@@    @@....  .... .\e[B\e[34D\
........   ...@@    @@..... .... .\e[B\e[34D\
. . ....   ...@@    @@.......... .\e[B\e[34D\
.   ....   ...@@    @@.......... .\e[B\e[34D\
.   ....   ....@    @....  ..... .\e[B\e[34D\
.   ....   ....@    @....   .... ."
".   ...@   @@@@@    @@@@@   .... .\e[B\e[34D\
.. ....@   @@@@@    @@@@@   .... .\e[B\e[34D\
.......@   @@@@@    @@@@@@  .... .\e[B\e[34D\
.......@   @@@@@    @@@@@@  .... .\e[B\e[34D\
.......@   @@@@@    @@@@@@@ .... .\e[B\e[34D\
. . ...@   @@@@@    @@@@@@@..... .\e[B\e[34D\
.   ...@   @@@@@    @@@@@@@..... .\e[B\e[34D\
.   ...@   @@@@@    @@@@@  ..... .\e[B\e[34D\
.   ...@   @@@@@    @@@@@   .... ."
".   @@@@   @@@@@    @@@@@   @... .\e[B\e[34D\
.. .@@@@   @@@@@    @@@@@   @@.. .\e[B\e[34D\
....@@@@   @@@@@    @@@@@@  @@.. .\e[B\e[34D\
....@@@@   @@@@@    @@@@@@  @@.. .\e[B\e[34D\
....@@@@   @@@@@    @@@@@@@ @@.. .\e[B\e[34D\
. . @@@@   @@@@@    @@@@@@@@@@.. .\e[B\e[34D\
.   @@@@   @@@@@    @@@@@@@@@@.. .\e[B\e[34D\
.   @@@@   @@@@@    @@@@@  @@@.. .\e[B\e[34D\
.   @@@@   @@@@@    @@@@@   @... ."
".   @@@@   @@@@@    @@@@@   @@@@ .\e[B\e[34D\
.@ @@@@@   @@@@@    @@@@@   @@@@ .\e[B\e[34D\
.@@@@@@@   @@@@@    @@@@@@  @@@@ .\e[B\e[34D\
.@@@@@@@   @@@@@    @@@@@@  @@@@ .\e[B\e[34D\
.@@@@@@@   @@@@@    @@@@@@@ @@@@ .\e[B\e[34D\
. @ @@@@   @@@@@    @@@@@@@@@@@@ .\e[B\e[34D\
.   @@@@   @@@@@    @@@@@@@@@@@@ .\e[B\e[34D\
.   @@@@   @@@@@    @@@@@  @@@@@ .\e[B\e[34D\
.   @@@@   @@@@@    @@@@@   @@@@ ."
"@   @@@@   @@@@@    @@@@@   @@@@ @\e[B\e[34D\
@@ @@@@@   @@@@@    @@@@@   @@@@ @\e[B\e[34D\
@@@@@@@@   @@@@@    @@@@@@  @@@@ @\e[B\e[34D\
@@@@@@@@   @@@@@    @@@@@@  @@@@ @\e[B\e[34D\
@@@@@@@@   @@@@@    @@@@@@@ @@@@ @\e[B\e[34D\
@ @ @@@@   @@@@@    @@@@@@@@@@@@ @\e[B\e[34D\
@   @@@@   @@@@@    @@@@@@@@@@@@ @\e[B\e[34D\
@   @@@@   @@@@@    @@@@@  @@@@@ @\e[B\e[34D\
@   @@@@   @@@@@    @@@@@   @@@@ @")

ascii_dark_mini=\
".   ....   .....    .....   .... .\e[B\e[34D\
.. .....   .....    .....   .... .\e[B\e[34D\
........   .....    ......  .... .\e[B\e[34D\
........   .....    ......  .... .\e[B\e[34D\
........   .....    ....... .... .\e[B\e[34D\
. . ....   .....    ............ .\e[B\e[34D\
.   ....   .....    ............ .\e[B\e[34D\
.   ....   .....    .....  ..... .\e[B\e[34D\
.   ....   .....    .....   .... ."

ascii_bright_mini=\
"@   @@@@   @@@@@    @@@@@   @@@@ @\e[B\e[34D\
@@ @@@@@   @@@@@    @@@@@   @@@@ @\e[B\e[34D\
@@@@@@@@   @@@@@    @@@@@@  @@@@ @\e[B\e[34D\
@@@@@@@@   @@@@@    @@@@@@  @@@@ @\e[B\e[34D\
@@@@@@@@   @@@@@    @@@@@@@ @@@@ @\e[B\e[34D\
@ @ @@@@   @@@@@    @@@@@@@@@@@@ @\e[B\e[34D\
@   @@@@   @@@@@    @@@@@@@@@@@@ @\e[B\e[34D\
@   @@@@   @@@@@    @@@@@  @@@@@ @\e[B\e[34D\
@   @@@@   @@@@@    @@@@@   @@@@ @"

rt_frame_width=14
rt_frame_height=4

ascii_bright_rt=\
"%%%%%  %%%%%%\e[B\e[13D\
%%  %%   %%\e[B\e[11D\
%%%%%    %%\e[B\e[11D\
%%  %%   %%"

ascii_dark_rt=\
":::::  ::::::\e[B\e[13D\
::  ::   ::\e[B\e[11D\
:::::    ::\e[B\e[11D\
::  ::   ::"

play_intro()
{
	local i=0
	echo -en "\e[$(( mini_frame_height + 2 ))S\e[$(( mini_frame_height + 2))A"
	put_frame $(( mini_frame_width + 22 )) $(( mini_frame_height + 2 )) "${ansi_frame}"
	echo -en "\n\e[$(( mini_frame_height + 1 ))A\e[8C\e[s"
	for frame in "${ascii_frames_mini[@]}"; do
		if [ $i -le 5 ]; then
			put_title "${frame}" "${ansi_mini_color}" "${ascii_bright_rt}" "${ansi_rt_color}"
		else
			put_title "${frame}" "${ansi_mini_color}" "${ascii_dark_rt}" "${ansi_rt_color}"
		fi
		sleep 0.04
		i=$(( i + 1 ))
		echo -en "\e[u"
	done
	put_title "${ascii_dark_mini}" "${ansi_mini_color}" "${ascii_dark_rt}" "${ansi_rt_color}"
	echo -en "\e[u"
	sleep 0.5
	local i=0
	for frame in "${ascii_frames_mini2[@]}"; do
		if [ $i -gt 2 ]; then
			put_title "${frame}" "${ansi_mini_color}" "${ascii_bright_rt}" "${ansi_rt_color}"
		else
			put_title "${frame}" "${ansi_mini_color}" "${ascii_dark_rt}" "${ansi_rt_color}"
		fi
		sleep 0.05
		i=$(( i + 1 ))
		echo -en "\e[u"
	done
	put_title "${ascii_bright_mini}" "${ansi_mini_color}" "${ascii_bright_rt}" "${ansi_rt_color}"
	echo -e "\n"
}

put_frame()
{
	local width="${1}"
	local height="${2}"
	local color="${3}"
	local horizontal="${frame_chars[0]}"
	local vertical="${frame_chars[1]}"
	local tl_corner="${frame_chars[2]}"
	local tr_corner="${frame_chars[3]}"
	local bl_corner="${frame_chars[4]}"
	local br_corner="${frame_chars[5]}"
	local frame_top="${tl_corner}"
	local frame_middle="${vertical}"
	local frame_bottom="${bl_corner}"
	local x=1
	while [ ${x} -lt $(( width - 1 )) ]; do
		frame_top="${frame_top}${horizontal}"
		frame_middle="${frame_middle} "
		frame_bottom="${frame_bottom}${horizontal}"
		x=$(( x + 1 ))
	done
	frame_middle="${frame_middle}${vertical}"
	frame="${frame_top}${tr_corner}\e[B\e[${width}D"
	local y=1
	while [ ${y} -lt $(( height - 1 )) ]; do
		frame="${frame}${frame_middle}\e[B\e[${width}D"
		y=$(( y + 1 ))
	done
	frame="${frame}${frame_bottom}${br_corner}"
	echo -en "${color}${frame}${ansi_nc}"
}

put_title()
{
	local mini_frame="${1}"
	local mini_color="${2}"
	local rt_frame="${3}"
	local rt_color="${4}"
	echo -en "${mini_color}${mini_frame}${ansi_nc}"
	echo -en "\e[$(( rt_frame_height - 1 ))A\e[$(( rt_frame_width / 2 ))D"
	echo -en "${rt_color}${rt_frame}${ansi_nc}"
}

play_intro
